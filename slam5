第五讲 相机与图象

1》相机模型-- 针孔模型
	1. 三维世界在成像平面上的投影
	2. 相似三角形，物理成像平面上，焦距f， X' = f * X/Z  Y' = f * Y/Z
	3. 成像平面到像素坐标(u,v)  加上缩放α，β与平移 Cx, Cy 从物理到实际
		u = fx * X/Z + Cx v = fy * Y/Z +Cy α和β，fx和fy不会差太多，Cx和Cy一般在图像中心
	4. 矩阵形式：左侧是齐次坐标，中间矩阵为内参数（相机内参，出厂后固定），右侧是非齐次坐标
		Z（U，V，1） △= KP  --Z 乘 像素的齐次坐标 = 内参 乘 点的相机坐标
	5. 相机坐标系与相机坐标系差一个变换，ZPuv =Z（U，V，1）=（RPw + t）= KTPw  R，t，T：外参
		外参是SLAM估测的目标
	6. 世界--相机--归一化平面z=1--像素网格（坐标）
	7. 镜头畸变，透镜使光线聚焦，视角越广，越边缘地方畸变越严重。主要畸变类型：径向和切向
		径向： 与距离中心点的距离有关，切向：与中心点夹角有关
	8. 畸变可以用归一化坐标的变化来描述
		径向： 	Xcorrected = x(1+k1r^2+k2r^4+k3r^6) 
			Ycorrected = y(1+k1r^2+k2r^4+k3r^6)
		切向： 	Xcorrected = x+2p1xy+p2(r^2+2x^2)
			Ycorrected = y+2p2xy+p1(r^2+2y^2)
		可合并，灵活保留各项系数	Xcorrected =  Ycorrected =

小孔成像总结：世界坐标系下有一个固定的点P，坐标为Pw；相机在运动，它的运动由R，t或变换矩阵T描述，P的相机坐标为：Pc=RPw+t；这时的Pc仍有X，Y，Z三个量，把他们投影到归一化平面Z=1上，得到P的归一化相机坐标Pc=[X/Z, Y/Z, 1]T；最后P的归一化坐标经过内参后，对应到他的像素坐标：Puv = KPc；最后如果有畸变，畸变修正发生在归一化相机坐标到像素坐标之变化间

	9. 双目模型：两个单目，水平放置，左右相机中心距离称为基线,双目能测量的z有最大值：fb
		左右像素的几何关系： z = fb/d  d = uL - uR （所以双目可以算距离z）
		d为视差disparity，描述同一个点在左右目上成像的距离，但d很难算
	10. RGB-D相机：物理手段直接测量深度，原理分为ToF或者结构光两种
		通常能得到与RGB图对应的深度图

2》图像
	1. 矩阵形式存储图像  像素坐标（x，y），像素具体值：灰度图：0-255 8为无符号整数，深度图：0-65535 16为整数，彩色图：多（三个）通道，三原色的值（注意通道顺序，如BGR，RGB，RGBA）


